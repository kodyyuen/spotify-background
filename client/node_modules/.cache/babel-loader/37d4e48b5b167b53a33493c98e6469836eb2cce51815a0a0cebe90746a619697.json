{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kody\\\\projects\\\\spotify-lyrics-background\\\\src\\\\login\\\\callback.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\n// import { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from \"react-router\";\nimport { Buffer } from \"buffer\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Callback = () => {\n  _s();\n  let code = '';\n  //   const { apiKey } = useSelector((state) => state.spotify);\n  //   const dispatch = useDispatch();\n\n  const getApiKey = async () => {\n    console.log('balls');\n    try {\n      await axios.post(\"https://accounts.spotify.com/api/token\", {\n        grant_type: \"authorization_code\",\n        code: code,\n        redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/callback`\n      }, {\n        headers: {\n          Authorization: `Basic ${Buffer.from(`${process.env.REACT_APP_CLIENT_ID}:${process.env.REACT_APP_CLIENT_SECRET}`, \"utf-8\").toString(\"base64\")}`,\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n    // console.log(response);\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/currently-playing\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 12\n    }, this);\n  };\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    code = urlParams.get(\"code\");\n    // getApiKey(code);\n\n    // dispatch(getApiKeyThunk(code));\n    // eslint-disable-next-line\n  });\n\n  useEffect(() => {\n    getApiKey(code);\n  }, [code]);\n\n  //   if (apiKey) {\n  //     return <Navigate to={\"/spotify\"} />;\n  //   }\n};\n_s(Callback, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n_c = Callback;\nexport default Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["useEffect","useState","Navigate","Buffer","axios","jsxDEV","_jsxDEV","Callback","_s","code","getApiKey","console","log","post","grant_type","redirect_uri","process","env","REACT_APP_SITE_BASE_URL","headers","Authorization","from","REACT_APP_CLIENT_ID","REACT_APP_CLIENT_SECRET","toString","e","to","fileName","_jsxFileName","lineNumber","columnNumber","urlParams","URLSearchParams","window","location","search","get","_c","$RefreshReg$"],"sources":["C:/Users/kody/projects/spotify-lyrics-background/src/login/callback.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navigate } from \"react-router\";\r\nimport { Buffer } from \"buffer\";\r\nimport axios from \"axios\";\r\n\r\nconst Callback = () => {\r\n    let code = '';\r\n  //   const { apiKey } = useSelector((state) => state.spotify);\r\n  //   const dispatch = useDispatch();\r\n\r\n  const getApiKey = async () => {\r\n    console.log('balls')\r\n    try {\r\n      await axios.post(\r\n        \"https://accounts.spotify.com/api/token\",\r\n        {\r\n          grant_type: \"authorization_code\",\r\n          code: code,\r\n          redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/callback`,\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Basic ${Buffer.from(\r\n              `${process.env.REACT_APP_CLIENT_ID}:${process.env.REACT_APP_CLIENT_SECRET}`,\r\n              \"utf-8\"\r\n            ).toString(\"base64\")}`,\r\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          },\r\n        }\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n    // console.log(response);\r\n    return <Navigate to={\"/currently-playing\"} />;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    code = urlParams.get(\"code\");\r\n    // getApiKey(code);\r\n    \r\n\r\n    // dispatch(getApiKeyThunk(code));\r\n    // eslint-disable-next-line\r\n  });\r\n  useEffect(() => {\r\n    getApiKey(code);\r\n  }, [code])\r\n\r\n  //   if (apiKey) {\r\n  //     return <Navigate to={\"/spotify\"} />;\r\n  //   }\r\n};\r\n\r\nexport default Callback;\r\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C;AACA,SAASC,QAAQ,QAAQ,cAAc;AACvC,SAASC,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,IAAIC,IAAI,GAAG,EAAE;EACf;EACA;;EAEA,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5BC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;IACpB,IAAI;MACF,MAAMR,KAAK,CAACS,IAAI,CACd,wCAAwC,EACxC;QACEC,UAAU,EAAE,oBAAoB;QAChCL,IAAI,EAAEA,IAAI;QACVM,YAAY,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,uBAAwB;MACvD,CAAC,EACD;QACEC,OAAO,EAAE;UACPC,aAAa,EAAG,SAAQjB,MAAM,CAACkB,IAAI,CAChC,GAAEL,OAAO,CAACC,GAAG,CAACK,mBAAoB,IAAGN,OAAO,CAACC,GAAG,CAACM,uBAAwB,EAAC,EAC3E,OACF,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAAE,EAAC;UACtB,cAAc,EAAE;QAClB;MACF,CACF,CAAC;IACH,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVd,OAAO,CAACC,GAAG,CAACa,CAAC,CAAC;IAChB;IACA;IACA,oBAAOnB,OAAA,CAACJ,QAAQ;MAACwB,EAAE,EAAE;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/C,CAAC;EAED9B,SAAS,CAAC,MAAM;IACd,MAAM+B,SAAS,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;IAC7D1B,IAAI,GAAGsB,SAAS,CAACK,GAAG,CAAC,MAAM,CAAC;IAC5B;;IAGA;IACA;EACF,CAAC,CAAC;;EACFpC,SAAS,CAAC,MAAM;IACdU,SAAS,CAACD,IAAI,CAAC;EACjB,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;;EAEV;EACA;EACA;AACF,CAAC;AAACD,EAAA,CAhDID,QAAQ;AAAA8B,EAAA,GAAR9B,QAAQ;AAkDd,eAAeA,QAAQ;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}