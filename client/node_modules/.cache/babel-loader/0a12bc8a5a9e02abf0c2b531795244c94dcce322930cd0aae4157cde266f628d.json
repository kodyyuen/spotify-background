{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kody\\\\projects\\\\spotify-lyrics-background\\\\src\\\\login\\\\callback.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from \"react-router\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Callback = () => {\n  _s();\n  const {\n    apiKey\n  } = useSelector(state => state.spotify);\n  const dispatch = useDispatch();\n  const getApiKey = async code => {\n    const response = await axios.post(\"https://accounts.spotify.com/api/token\", {\n      grant_type: \"authorization_code\",\n      code: code,\n      redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/spotify/callback`\n    }, {\n      headers: {\n        Authorization: `Basic ${Buffer.from(`${process.env.REACT_APP_CLIENT_ID}:${process.env.REACT_APP_CLIENT_SECRET}`, \"utf-8\").toString(\"base64\")}`,\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    });\n    console.log(response);\n  };\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n    getApiKey(code);\n    // dispatch(getApiKeyThunk(code));\n    // eslint-disable-next-line\n  }, []);\n  if (apiKey) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/spotify\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 12\n    }, this);\n  }\n};\n_s(Callback, \"kZ2pa1ku0ph5duGdv7sXhC+UWhQ=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = Callback;\nexport default Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["useEffect","useDispatch","useSelector","Navigate","axios","jsxDEV","_jsxDEV","Callback","_s","apiKey","state","spotify","dispatch","getApiKey","code","response","post","grant_type","redirect_uri","process","env","REACT_APP_SITE_BASE_URL","headers","Authorization","Buffer","from","REACT_APP_CLIENT_ID","REACT_APP_CLIENT_SECRET","toString","console","log","urlParams","URLSearchParams","window","location","search","get","to","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/kody/projects/spotify-lyrics-background/src/login/callback.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navigate } from \"react-router\";\r\nimport axios from \"axios\";\r\n\r\nconst Callback = () => {\r\n  const { apiKey } = useSelector((state) => state.spotify);\r\n  const dispatch = useDispatch();\r\n\r\n  const getApiKey = async (code) => {\r\n    const response = await axios.post(\r\n      \"https://accounts.spotify.com/api/token\",\r\n      {\r\n        grant_type: \"authorization_code\",\r\n        code: code,\r\n        redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/spotify/callback`,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: `Basic ${Buffer.from(\r\n            `${process.env.REACT_APP_CLIENT_ID}:${process.env.REACT_APP_CLIENT_SECRET}`,\r\n            \"utf-8\"\r\n          ).toString(\"base64\")}`,\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n        },\r\n      }\r\n    );\r\n    console.log(response);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const code = urlParams.get(\"code\");\r\n    getApiKey(code)\r\n    // dispatch(getApiKeyThunk(code));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  if (apiKey) {\r\n    return <Navigate to={\"/spotify\"} />;\r\n  }\r\n};\r\n\r\nexport default Callback;\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,QAAQ,QAAQ,cAAc;AACvC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM;IAAEC;EAAO,CAAC,GAAGP,WAAW,CAAEQ,KAAK,IAAKA,KAAK,CAACC,OAAO,CAAC;EACxD,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAMY,SAAS,GAAG,MAAOC,IAAI,IAAK;IAChC,MAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,IAAI,CAC/B,wCAAwC,EACxC;MACEC,UAAU,EAAE,oBAAoB;MAChCH,IAAI,EAAEA,IAAI;MACVI,YAAY,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,uBAAwB;IACvD,CAAC,EACD;MACEC,OAAO,EAAE;QACPC,aAAa,EAAG,SAAQC,MAAM,CAACC,IAAI,CAChC,GAAEN,OAAO,CAACC,GAAG,CAACM,mBAAoB,IAAGP,OAAO,CAACC,GAAG,CAACO,uBAAwB,EAAC,EAC3E,OACF,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAAE,EAAC;QACtB,cAAc,EAAE;MAClB;IACF,CACF,CAAC;IACDC,OAAO,CAACC,GAAG,CAACf,QAAQ,CAAC;EACvB,CAAC;EAEDf,SAAS,CAAC,MAAM;IACd,MAAM+B,SAAS,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;IAC7D,MAAMrB,IAAI,GAAGiB,SAAS,CAACK,GAAG,CAAC,MAAM,CAAC;IAClCvB,SAAS,CAACC,IAAI,CAAC;IACf;IACA;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIL,MAAM,EAAE;IACV,oBAAOH,OAAA,CAACH,QAAQ;MAACkC,EAAE,EAAE;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACrC;AACF,CAAC;AAACjC,EAAA,CApCID,QAAQ;EAAA,QACOL,WAAW,EACbD,WAAW;AAAA;AAAAyC,EAAA,GAFxBnC,QAAQ;AAsCd,eAAeA,QAAQ;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}