{"ast":null,"code":"import axios from \"axios\";\nimport { Buffer } from \"buffer\";\nconst MXM_BASE_URL = \"https://api.musixmatch.com/ws/1.1\";\nconst getApiKey = async () => {\n  const response = await axios.post(\"https://accounts.spotify.com/api/token\", {\n    refresh_token: process.env.REACT_APP_SPOTIFY_REFRESH_TOKEN,\n    grant_type: \"refresh_token\"\n  }, {\n    headers: {\n      Authorization: `Basic ${Buffer.from(`${process.env.REACT_APP_SPOTIFY_CLIENT_ID}:${process.env.REACT_APP_SPOTIFY_CLIENT_SECRET}`, \"utf-8\").toString(\"base64\")}`,\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    }\n  });\n  return response.data.access_token;\n};\nexport const getSpotifyCurrentSong = async () => {\n  const apiKey = await getApiKey();\n  const response = await axios.get(\"https://api.spotify.com/v1/me/player/currently-playing\", {\n    headers: {\n      Authorization: `Bearer ${apiKey}`\n    }\n  });\n  return response.data;\n};\nexport const getLyrics = async () => {\n  const str = new URLSearchParams({\n    response_type: \"code\",\n    client_id: process.env.REACT_APP_SPOTIFY_CLIENT_ID,\n    scope: scopes.join(\" \"),\n    redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/currently-playing`,\n    show_dialog: \"true\"\n  });\n  const response = await axios.get(`${MXM_BASE_URL}/track.search`);\n};","map":{"version":3,"names":["axios","Buffer","MXM_BASE_URL","getApiKey","response","post","refresh_token","process","env","REACT_APP_SPOTIFY_REFRESH_TOKEN","grant_type","headers","Authorization","from","REACT_APP_SPOTIFY_CLIENT_ID","REACT_APP_SPOTIFY_CLIENT_SECRET","toString","data","access_token","getSpotifyCurrentSong","apiKey","get","getLyrics","str","URLSearchParams","response_type","client_id","scope","scopes","join","redirect_uri","REACT_APP_SITE_BASE_URL","show_dialog"],"sources":["C:/Users/kody/projects/spotify-lyrics-background/src/spotify/app-service.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { Buffer } from \"buffer\";\r\n\r\nconst MXM_BASE_URL = \"https://api.musixmatch.com/ws/1.1\"\r\n\r\nconst getApiKey = async () => {\r\n  const response = await axios.post(\r\n    \"https://accounts.spotify.com/api/token\",\r\n    {\r\n      refresh_token: process.env.REACT_APP_SPOTIFY_REFRESH_TOKEN,\r\n      grant_type: \"refresh_token\",\r\n    },\r\n    {\r\n      headers: {\r\n        Authorization: `Basic ${Buffer.from(\r\n          `${process.env.REACT_APP_SPOTIFY_CLIENT_ID}:${process.env.REACT_APP_SPOTIFY_CLIENT_SECRET}`,\r\n          \"utf-8\"\r\n        ).toString(\"base64\")}`,\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      },\r\n    }\r\n  );\r\n\r\n  return response.data.access_token;\r\n};\r\n\r\nexport const getSpotifyCurrentSong = async () => {\r\n  const apiKey = await getApiKey();\r\n\r\n  const response = await axios.get(\"https://api.spotify.com/v1/me/player/currently-playing\", {\r\n    headers: { Authorization: `Bearer ${apiKey}` },\r\n  });\r\n  return response.data;\r\n};\r\n\r\nexport const getLyrics = async () => {\r\n  const str = new URLSearchParams({\r\n    response_type: \"code\",\r\n    client_id: process.env.REACT_APP_SPOTIFY_CLIENT_ID,\r\n    scope: scopes.join(\" \"),\r\n    redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/currently-playing`,\r\n    show_dialog: \"true\",\r\n  });\r\n  const response = await axios.get(`${MXM_BASE_URL}/track.search`)\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,MAAM,QAAQ,QAAQ;AAE/B,MAAMC,YAAY,GAAG,mCAAmC;AAExD,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,IAAI,CAC/B,wCAAwC,EACxC;IACEC,aAAa,EAAEC,OAAO,CAACC,GAAG,CAACC,+BAA+B;IAC1DC,UAAU,EAAE;EACd,CAAC,EACD;IACEC,OAAO,EAAE;MACPC,aAAa,EAAG,SAAQX,MAAM,CAACY,IAAI,CAChC,GAAEN,OAAO,CAACC,GAAG,CAACM,2BAA4B,IAAGP,OAAO,CAACC,GAAG,CAACO,+BAAgC,EAAC,EAC3F,OACF,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAAE,EAAC;MACtB,cAAc,EAAE;IAClB;EACF,CACF,CAAC;EAED,OAAOZ,QAAQ,CAACa,IAAI,CAACC,YAAY;AACnC,CAAC;AAED,OAAO,MAAMC,qBAAqB,GAAG,MAAAA,CAAA,KAAY;EAC/C,MAAMC,MAAM,GAAG,MAAMjB,SAAS,CAAC,CAAC;EAEhC,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACqB,GAAG,CAAC,wDAAwD,EAAE;IACzFV,OAAO,EAAE;MAAEC,aAAa,EAAG,UAASQ,MAAO;IAAE;EAC/C,CAAC,CAAC;EACF,OAAOhB,QAAQ,CAACa,IAAI;AACtB,CAAC;AAED,OAAO,MAAMK,SAAS,GAAG,MAAAA,CAAA,KAAY;EACnC,MAAMC,GAAG,GAAG,IAAIC,eAAe,CAAC;IAC9BC,aAAa,EAAE,MAAM;IACrBC,SAAS,EAAEnB,OAAO,CAACC,GAAG,CAACM,2BAA2B;IAClDa,KAAK,EAAEC,MAAM,CAACC,IAAI,CAAC,GAAG,CAAC;IACvBC,YAAY,EAAG,GAAEvB,OAAO,CAACC,GAAG,CAACuB,uBAAwB,oBAAmB;IACxEC,WAAW,EAAE;EACf,CAAC,CAAC;EACF,MAAM5B,QAAQ,GAAG,MAAMJ,KAAK,CAACqB,GAAG,CAAE,GAAEnB,YAAa,eAAc,CAAC;AAClE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}