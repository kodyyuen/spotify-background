{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kody\\\\projects\\\\spotify-lyrics-background\\\\src\\\\login\\\\callback.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\n// import { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from \"react-router\";\nimport { Buffer } from \"buffer\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Callback = () => {\n  _s();\n  //   const { apiKey } = useSelector((state) => state.spotify);\n  //   const dispatch = useDispatch();\n\n  const getApiKey = async code => {\n    const response = await axios.post(\"https://accounts.spotify.com/api/token\", {\n      grant_type: \"authorization_code\",\n      code: code,\n      redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/callback`\n    }, {\n      headers: {\n        Authorization: `Basic ${Buffer.from(`${process.env.REACT_APP_CLIENT_ID}:${process.env.REACT_APP_CLIENT_SECRET}`, \"utf-8\").toString(\"base64\")}`,\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    });\n    console.log(response);\n  };\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n    getApiKey(code);\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/currently-playing\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 12\n    }, this);\n    // dispatch(getApiKeyThunk(code));\n    // eslint-disable-next-line\n  });\n\n  //   if (apiKey) {\n  //     return <Navigate to={\"/spotify\"} />;\n  //   }\n};\n_s(Callback, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Callback;\nexport default Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["useEffect","Navigate","Buffer","axios","jsxDEV","_jsxDEV","Callback","_s","getApiKey","code","response","post","grant_type","redirect_uri","process","env","REACT_APP_SITE_BASE_URL","headers","Authorization","from","REACT_APP_CLIENT_ID","REACT_APP_CLIENT_SECRET","toString","console","log","urlParams","URLSearchParams","window","location","search","get","to","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/kody/projects/spotify-lyrics-background/src/login/callback.js"],"sourcesContent":["import { useEffect } from \"react\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navigate } from \"react-router\";\r\nimport { Buffer } from \"buffer\";\r\nimport axios from \"axios\";\r\n\r\nconst Callback = () => {\r\n//   const { apiKey } = useSelector((state) => state.spotify);\r\n//   const dispatch = useDispatch();\r\n\r\n  const getApiKey = async (code) => {\r\n    const response = await axios.post(\r\n      \"https://accounts.spotify.com/api/token\",\r\n      {\r\n        grant_type: \"authorization_code\",\r\n        code: code,\r\n        redirect_uri: `${process.env.REACT_APP_SITE_BASE_URL}/callback`,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: `Basic ${Buffer.from(\r\n            `${process.env.REACT_APP_CLIENT_ID}:${process.env.REACT_APP_CLIENT_SECRET}`,\r\n            \"utf-8\"\r\n          ).toString(\"base64\")}`,\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n        },\r\n      }\r\n    );\r\n    console.log(response);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const code = urlParams.get(\"code\");\r\n    getApiKey(code)\r\n    return <Navigate to={\"/currently-playing\"} />\r\n    // dispatch(getApiKeyThunk(code));\r\n    // eslint-disable-next-line\r\n  });\r\n\r\n//   if (apiKey) {\r\n//     return <Navigate to={\"/spotify\"} />;\r\n//   }\r\n};\r\n\r\nexport default Callback;\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC;AACA,SAASC,QAAQ,QAAQ,cAAc;AACvC,SAASC,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvB;EACA;;EAEE,MAAMC,SAAS,GAAG,MAAOC,IAAI,IAAK;IAChC,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAC/B,wCAAwC,EACxC;MACEC,UAAU,EAAE,oBAAoB;MAChCH,IAAI,EAAEA,IAAI;MACVI,YAAY,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,uBAAwB;IACvD,CAAC,EACD;MACEC,OAAO,EAAE;QACPC,aAAa,EAAG,SAAQhB,MAAM,CAACiB,IAAI,CAChC,GAAEL,OAAO,CAACC,GAAG,CAACK,mBAAoB,IAAGN,OAAO,CAACC,GAAG,CAACM,uBAAwB,EAAC,EAC3E,OACF,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAAE,EAAC;QACtB,cAAc,EAAE;MAClB;IACF,CACF,CAAC;IACDC,OAAO,CAACC,GAAG,CAACd,QAAQ,CAAC;EACvB,CAAC;EAEDV,SAAS,CAAC,MAAM;IACd,MAAMyB,SAAS,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;IAC7D,MAAMpB,IAAI,GAAGgB,SAAS,CAACK,GAAG,CAAC,MAAM,CAAC;IAClCtB,SAAS,CAACC,IAAI,CAAC;IACf,oBAAOJ,OAAA,CAACJ,QAAQ;MAAC8B,EAAE,EAAE;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;IAC7C;IACA;EACF,CAAC,CAAC;;EAEJ;EACA;EACA;AACA,CAAC;AAAC5B,EAAA,CArCID,QAAQ;AAAA8B,EAAA,GAAR9B,QAAQ;AAuCd,eAAeA,QAAQ;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}